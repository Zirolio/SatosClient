/**
 * @license
 * Copyright 2015 The Emscripten Authors
 * SPDX-License-Identifier: MIT
 */
"use strict";var e={},a=!1;var t=function(){var e=Array.prototype.slice.call(arguments).join(" ");console.error(e)};self.alert=function(){var a=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:a,threadId:e._pthread_self()})},e.instantiateWasm=(a,t)=>{var r=e.wasmModule;return e.wasmModule=null,t(new WebAssembly.Instance(r,a))},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=function r(s){try{if("load"===s.data.cmd){let a=[];self.onmessage=e=>a.push(e),self.startWorker=t=>{e=t,postMessage({cmd:"loaded"});for(let e of a)r(e);self.onmessage=r},e.wasmModule=s.data.wasmModule;for(const a of s.data.handlers)e[a]=function(){postMessage({cmd:"callHandler",handler:a,args:[...arguments]})};if(e.wasmMemory=s.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.workerID=s.data.workerID,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof s.data.urlOrBlob)importScripts(s.data.urlOrBlob);else{var d=URL.createObjectURL(s.data.urlOrBlob);importScripts(d),URL.revokeObjectURL(d)}Godot(e)}else if("run"===s.data.cmd){e.__emscripten_thread_init(s.data.pthread_ptr,0,0,1),e.__emscripten_thread_mailbox_await(s.data.pthread_ptr),s.data.pthread_ptr||abort("Assertion failed: "+o),e.establishStackSpace(),e.PThread.receiveObjectTransfer(s.data),e.PThread.threadInitTLS(),a||(a=!0);try{e.invokeEntryPoint(s.data.start_routine,s.data.arg)}catch(e){if("unwind"!=e)throw e}}else"cancel"===s.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===s.data.target||("checkMailbox"===s.data.cmd?a&&e.checkMailbox():s.data.cmd&&(t("worker.js received unknown command "+s.data.cmd),t(s.data)))}catch(a){throw t("worker.js onmessage() captured an uncaught exception: "+a),a&&a.stack&&t(a.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),a}var o};